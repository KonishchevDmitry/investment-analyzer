# Рекомендации по взаимодействию с налоговой

## 3-НДФЛ

### Формирование налоговой декларации

Investments позволяет в полностью автоматическом режиме производить заполнение 3-НДФЛ в формате программы
[Декларация](https://www.nalog.ru/rn77/program/5961249/) (`*.dcX`).

Чтобы получить заполненную декларацию, необходимо:
1. Создать в программе Декларация налоговую декларацию и сохранить ее на диск. Никакие поля можно не заполнять,
но необходимо отметить галочку `Задание условий -> Имеются доходы -> В иностранной валюте`:
![Создание файла декларации](images/empty-statement.png?raw=true)
2. Далее — запустить `investments tax-statement ib 2020 statement.dc0` указав год (2020) и путь к сохраненному файлу.

Investments внесет все полученные доходы в указанный файл, а также выведет на stdout таблицы расчета, которые
впоследствии можно будет использовать для объяснения полученных цифр инспектору.

Открыв файл снова в программе Декларация, увидим на соответствующей вкладке задекларированные доходы:
![Заполненный файл декларации](images/filled-statement.png?raw=true)

### Особенности и подводные камни

<a name="dividend-reclassifications"></a>
#### Перерасчет налогов

В начале года (Interactive Brokers - конец февраля, Firstrade - март) зарубежные брокеры производят перерасчет налогов,
уплаченных в прошлом году с дивидендов, возвращая часть удержанных налогов. Причина этого (поддержка IB):
> Every year IB has to adjust the 1042 withholding (i.e. withholding on US dividends paid to non-US accounts) to reflect
> dividend reclassifications. This is typically done in February the following year. As such, the majority of these
> adjustments are refunds to customers. The typical case is when IB's best information at the time of paying a dividend
> indicates that the distribution is an ordinary dividend (and therefore subject to withholding), then later at year end,
> the dividend is reclassified as Return of Capital, proceeds, or capital gains (all of which are not subject to 1042
> withholding).

В результате у нас получается [не очень понятная ситуация](https://www.banki.ru/forum/?PAGE_NAME=message&FID=21&TID=377500&MID=8558603#message8558603):
1. Такого понятия как "возврат уплаченного налога" в 3-НДФЛ нет.
2. Для инспектора такие возвраты выглядят как доход следующего года.
3. Ко всему прочему, все это еще осложняется тем, что в IB данные возвраты в отчетах имеют даты исходной уплаты налога —
т. е. совершенно не соответствуют дате поступления средств на счет.
   
В целом, если обсуждать этот вопрос на профильных ресурсах, то абсолютное большинство сходится в том (и я в их числе),
чтобы считать эти возвраты именно возвратами, а именно — уменьшать за их счет величину уплаченного налога. Хотя, есть и
[прецеденты](https://www.banki.ru/forum/?PAGE_NAME=message&FID=21&TID=379285&MID=8493535#message8493535) когда налоговый
инспектор отказывается принимать такую декларацию.

Учитывая все вышесказанное, Investments при выполнении расчета выполняет пересчет уплаченных налогов при наличии таких
возвратов из-за чего налоговую декларацию имеет смысл формировать не раньше марта в случае IB и не раньше апреля в
случае Firstrade.

#### Interactive Brokers

<a name="ib-trade-settle-date"></a>
С точки зрения налогообложения все расчеты необходимо проводить на дату расчета сделки, но в Activity Statement
присутствуют только даты заключения сделок. В принципе, можно сформировать налоговую декларацию и по ним — программа
это позволяет сделать, хотя и пишет при этом warning.

Чтобы программа могла рассчитывать сделки на дату расчета, необходимо к Activity Statement
[добавить Trade Confirmation Report](https://github.com/KonishchevDmitry/investments#ib-trade-settle-date).

Делать это или нет — целиком ваше решение. В целом - это более правильный способ расчета с точки зрения налогового
законодательства. Из минусов — потенциально больше подтверждающих документов и разъяснений для налоговой инспекции.

### Подтверждающие документы

По моим наблюдениям, большинство людей при отправке декларации пытается приложить к ней как можно больше подтверждающих
документов. Намерение, безусловно, хорошее, но не всегда просто осуществимое — попробуйте, к примеру, перевести на
русский язык (а по закону, все подтверждающие документы должны быть с переводом) отчеты Firstrade — сразу же возникнет
мысль "а не проще ли вообще закрыть этот счет и пользоваться только IB / российскими брокерами". :)

К тому же, в отчетах может быть довольно большое количество различный неочевидных моментов: [перерасчет
налогов](#dividend-reclassifications), [несовпадение дат](https://github.com/KonishchevDmitry/investments#tax-remapping)
в записях о возврате, [отсутствие даты расчета сделки в отчетах](#ib-trade-settle-date), корпоративные действия и
[корпоративные действия, не отраженные в отчетах](https://github.com/KonishchevDmitry/investments/issues/29). Если
налоговый инспектор действительно решит в них взглянуть, а не просто не глядя приложить к декларации, то с довольно
большой вероятностью у него возникнут к вам вопросы, откуда взялись те или иные цифры.

Поэтому лично мой подход следующий: по закону у нас есть обязанность задекларировать полученные доходы и уплатить с них
налог, но при этом нет изначальной обязанности тут же прикладывать все возможные доказательства получения этого дохода.
Поэтому мы формируем максимально корректную (средствами программы, что исключает возможность случайных ошибок в расчетах)
и понятную декларацию, где каждый доход отображается отдельной строкой, и которая предоставляет максимум информации о
всех полученных доходах. Никаких подтверждающих документов при этом не прикладываем, чтобы лишний раз не вводить
инспектора в заблуждение из-за особенностей отчетов каждого брокера. Если же налоговая по какой-то причине решит, что
подтверждающие документы ей все-таки нужны — тогда уже отправляем вместе с длинной пояснительной запиской, как
интерпретировать информацию в них.